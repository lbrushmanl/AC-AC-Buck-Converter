Version 4
SHEET 1 3288 680
WIRE -560 -1152 -800 -1152
WIRE -560 -1136 -560 -1152
WIRE -800 -1088 -800 -1152
WIRE -304 -1056 -304 -1072
WIRE -560 -1040 -560 -1056
WIRE -400 -1040 -560 -1040
WIRE -336 -1040 -400 -1040
WIRE 304 -1040 304 -1056
WIRE 464 -1040 464 -1056
WIRE 592 -1040 592 -1056
WIRE -560 -1024 -560 -1040
WIRE -208 -1024 -272 -1024
WIRE -160 -1024 -208 -1024
WIRE -336 -1008 -384 -1008
WIRE -1088 -992 -1088 -1008
WIRE -976 -992 -976 -1008
WIRE -304 -976 -304 -992
WIRE -160 -960 -160 -1024
WIRE -144 -960 -160 -960
WIRE 304 -944 304 -960
WIRE 304 -944 272 -944
WIRE 464 -944 464 -960
WIRE 464 -944 432 -944
WIRE 592 -944 592 -960
WIRE 592 -944 576 -944
WIRE -800 -928 -800 -1008
WIRE -560 -928 -560 -944
WIRE -560 -928 -800 -928
WIRE -384 -928 -384 -1008
WIRE -384 -928 -560 -928
WIRE -144 -928 -160 -928
WIRE 16 -928 -80 -928
WIRE 304 -928 304 -944
WIRE 464 -928 464 -944
WIRE 592 -928 592 -944
WIRE -1088 -896 -1088 -912
WIRE -976 -896 -976 -912
WIRE -800 -896 -800 -928
WIRE -384 -880 -384 -928
WIRE -336 -880 -384 -880
WIRE -208 -864 -272 -864
WIRE -160 -864 -160 -928
WIRE -160 -864 -208 -864
WIRE -400 -848 -400 -1040
WIRE -336 -848 -400 -848
WIRE 304 -832 304 -848
WIRE 432 -832 304 -832
WIRE 464 -832 464 -848
WIRE 464 -832 432 -832
WIRE 592 -832 592 -848
WIRE 592 -832 464 -832
WIRE -304 -816 -304 -832
WIRE 432 -816 432 -832
WIRE -800 -800 -800 -816
WIRE -768 -576 -800 -576
WIRE -384 -576 -768 -576
WIRE -288 -528 -320 -528
WIRE -176 -528 -288 -528
WIRE 464 -528 336 -528
WIRE 496 -528 464 -528
WIRE 896 -528 560 -528
WIRE 1120 -528 960 -528
WIRE -384 -512 -640 -512
WIRE 432 -496 336 -496
WIRE 496 -496 432 -496
WIRE 864 -496 816 -496
WIRE 896 -496 864 -496
WIRE -640 -448 -640 -512
WIRE -592 -448 -640 -448
WIRE -496 -448 -512 -448
WIRE -416 -448 -432 -448
WIRE -272 -448 -352 -448
WIRE -640 -432 -640 -448
WIRE 464 -432 464 -528
WIRE 496 -432 464 -432
WIRE 896 -432 560 -432
WIRE 1120 -432 960 -432
WIRE 400 -400 336 -400
WIRE 496 -400 400 -400
WIRE 832 -400 816 -400
WIRE 896 -400 832 -400
WIRE -640 -352 -640 -368
WIRE -640 -352 -688 -352
WIRE -688 -336 -688 -352
WIRE -640 -336 -640 -352
WIRE 464 -336 336 -336
WIRE 496 -336 464 -336
WIRE 896 -336 560 -336
WIRE 1120 -336 960 -336
WIRE 432 -304 432 -496
WIRE 496 -304 432 -304
WIRE 864 -304 864 -496
WIRE 896 -304 864 -304
WIRE -640 -256 -640 -272
WIRE -592 -256 -640 -256
WIRE -496 -256 -512 -256
WIRE -416 -256 -432 -256
WIRE -288 -256 -288 -528
WIRE -288 -256 -352 -256
WIRE 464 -240 464 -336
WIRE 496 -240 464 -240
WIRE 896 -240 560 -240
WIRE 1120 -240 960 -240
WIRE 400 -208 400 -400
WIRE 496 -208 400 -208
WIRE 832 -208 832 -400
WIRE 896 -208 832 -208
WIRE -640 -176 -640 -256
WIRE -400 -176 -640 -176
WIRE -800 -128 -800 -576
WIRE -576 -128 -800 -128
WIRE -400 -128 -512 -128
WIRE -272 -128 -272 -448
WIRE -272 -128 -336 -128
WIRE -176 -128 -272 -128
WIRE 2192 -32 2160 -32
WIRE 2304 -32 2304 -64
WIRE 2304 -32 2256 -32
WIRE 2352 -32 2304 -32
WIRE 2448 -32 2416 -32
WIRE 2160 16 2160 -32
WIRE 2160 16 1984 16
WIRE 2448 16 2448 -32
WIRE 2512 16 2448 16
WIRE 2560 16 2512 16
WIRE 2592 16 2560 16
WIRE 2672 16 2592 16
WIRE 2848 16 2752 16
WIRE 2928 16 2848 16
WIRE 2992 16 2928 16
WIRE 2160 64 2160 16
WIRE 2176 64 2160 64
WIRE 2304 64 2304 -32
WIRE 2304 64 2272 64
WIRE 2336 64 2304 64
WIRE 2448 64 2448 16
WIRE 2448 64 2432 64
WIRE 576 128 576 112
WIRE 992 128 992 112
WIRE 144 144 144 128
WIRE 2256 160 2256 112
WIRE 2256 160 2224 160
WIRE 2352 160 2352 112
WIRE 2384 160 2352 160
WIRE 1984 224 1984 16
WIRE 1984 224 1936 224
WIRE 144 240 144 224
WIRE 576 240 576 208
WIRE 768 240 576 240
WIRE 992 240 992 208
WIRE 992 240 768 240
WIRE 2512 272 2512 16
WIRE 1984 288 1984 224
WIRE 2592 288 2592 16
WIRE 2992 288 2992 16
WIRE 2848 304 2848 16
WIRE 2464 352 2416 352
WIRE 2512 400 2512 368
WIRE 2512 400 2464 400
WIRE 2592 400 2592 352
WIRE 2592 400 2512 400
WIRE 2464 416 2464 400
WIRE 1984 432 1984 368
WIRE 1984 432 1936 432
WIRE 2512 432 2512 400
WIRE 2464 448 2416 448
WIRE 2592 448 2592 400
WIRE 592 464 592 448
WIRE 1008 464 1008 448
WIRE 592 576 592 544
WIRE 1008 576 1008 544
WIRE 1984 592 1984 432
WIRE 2512 592 2512 528
WIRE 2512 592 1984 592
WIRE 2592 592 2592 512
WIRE 2592 592 2512 592
WIRE 2848 592 2848 368
WIRE 2848 592 2592 592
WIRE 2992 592 2992 368
WIRE 2992 592 2848 592
FLAG 144 128 VP
FLAG 144 240 0
FLAG 576 112 S1-Sig
FLAG 992 112 S2-Sig
FLAG 592 448 S3-Sig
FLAG 1008 576 0
FLAG 1008 448 S4-Sig
FLAG 592 576 0
FLAG 2560 16 SW
FLAG 1936 224 L
FLAG 1936 432 N
FLAG 2304 -64 HSW
FLAG 768 240 HSW
FLAG 2464 416 0
FLAG 2384 160 S2-Sig
FLAG 2224 160 S1-Sig
FLAG 2416 448 S4-Sig
FLAG 2416 352 S3-Sig
FLAG -688 -336 0
FLAG -176 -528 PWM_POS
FLAG -176 -128 PWM_NEG
FLAG 336 -528 PWM_POS
FLAG 336 -336 PWM_NEG
FLAG 336 -496 POS_C
FLAG 336 -400 NEG_C
FLAG 816 -496 NEG_C
FLAG 816 -400 POS_C
FLAG -800 -800 0
FLAG -304 -976 0
FLAG -1088 -896 0
FLAG -1088 -1008 12V
FLAG -304 -1072 12V
FLAG -304 -896 12V
FLAG -304 -816 0
FLAG -208 -864 POS_C12
FLAG -208 -1024 NEG_C12
FLAG 1120 -528 S1
FLAG 1120 -432 S2
FLAG 1120 -336 S3
FLAG 1120 -240 S4
FLAG -768 -576 VP
FLAG 464 -1056 NEG_C12
FLAG 304 -1056 POS_C12
FLAG 592 -1056 ZC12
FLAG 16 -928 ZC12
FLAG 432 -816 0
FLAG 272 -944 POS_C
FLAG 432 -944 NEG_C
FLAG 576 -944 ZC
FLAG -976 -896 0
FLAG -976 -1008 5V
FLAG 2928 16 Line-Out
SYMBOL voltage 144 128 R0
WINDOW 3 43 180 Invisible 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 5 0 1n 1n {pow(fs, -1)*(1-duty)} {pow(fs, -1)})
SYMATTR InstName V2
SYMBOL bv 576 112 R0
WINDOW 3 -153 178 Left 2
SYMATTR Value V=V(S1)*2.4
SYMATTR InstName B1
SYMBOL bv 992 112 R0
WINDOW 3 -166 179 Left 2
SYMATTR Value V=V(S2)*2.4
SYMATTR InstName B2
SYMBOL bv 592 448 R0
WINDOW 3 -153 178 Left 2
SYMATTR Value V=V(S3)*2.4
SYMATTR InstName B3
SYMBOL bv 1008 448 R0
WINDOW 3 -166 179 Left 2
SYMATTR Value V=V(S4)*2.4
SYMATTR InstName B4
SYMBOL AutoGenerated\\irfp460n 2176 112 R270
WINDOW 3 196 41 Left 2
SYMATTR InstName U3
SYMBOL AutoGenerated\\irfp460n 2432 112 M270
WINDOW 3 194 52 Left 2
SYMATTR InstName U4
SYMBOL AutoGenerated\\irfp460n 2464 272 R0
WINDOW 3 169 53 Left 2
SYMATTR InstName U5
SYMBOL AutoGenerated\\irfp460n 2464 528 M180
WINDOW 3 178 49 Left 2
SYMATTR InstName U6
SYMBOL diode 2608 352 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMBOL diode 2576 448 R0
SYMATTR InstName D2
SYMBOL diode 2256 -48 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D3
SYMBOL diode 2352 -16 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D4
SYMBOL voltage 1984 272 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value SINE(0 240 50)
SYMBOL res 2976 272 R0
SYMATTR InstName R1
SYMATTR Value 28
SYMBOL cap 2832 304 R0
SYMATTR InstName C1
SYMATTR Value 8µ
SYMBOL ind 2656 32 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 200µ
SYMBOL Digital\\or -368 -208 R0
WINDOW 3 -36 125 Invisible 2
SYMATTR Value Vhigh=5
SYMATTR InstName A1
SYMBOL Digital\\inv -576 -192 R0
WINDOW 3 -21 110 Invisible 2
SYMATTR Value Vhigh=5
SYMATTR InstName A2
SYMBOL cap -656 -336 R0
SYMATTR InstName C2
SYMATTR Value 1n
SYMBOL cap -656 -432 R0
SYMATTR InstName C3
SYMATTR Value 1n
SYMBOL res -496 -272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 100
SYMBOL res -496 -464 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 100
SYMBOL Digital\\inv -432 -320 M0
WINDOW 3 -21 110 Invisible 2
SYMATTR Value Vhigh=5
SYMATTR InstName A3
SYMBOL Digital\\inv -352 -320 M0
WINDOW 3 -21 110 Invisible 2
SYMATTR Value Vhigh=5
SYMATTR InstName A4
SYMBOL Digital\\inv -352 -512 M0
WINDOW 3 -21 110 Invisible 2
SYMATTR Value Vhigh=5
SYMATTR InstName A5
SYMBOL Digital\\inv -432 -512 M0
WINDOW 3 -21 110 Invisible 2
SYMATTR Value Vhigh=5
SYMATTR InstName A6
SYMBOL Digital\\or -352 -608 R0
WINDOW 3 -36 125 Invisible 2
SYMATTR Value Vhigh=5
SYMATTR InstName A7
SYMBOL Digital\\and 528 -288 R0
WINDOW 3 16 112 Invisible 2
SYMATTR Value Vhigh=5
SYMATTR InstName A8
SYMBOL Digital\\and 528 -384 R0
WINDOW 3 16 112 Invisible 2
SYMATTR Value Vhigh=5
SYMATTR InstName A13
SYMBOL Digital\\and 528 -480 R0
WINDOW 3 16 112 Invisible 2
SYMATTR Value Vhigh=5
SYMATTR InstName A14
SYMBOL Digital\\and 528 -576 R0
WINDOW 3 16 112 Invisible 2
SYMATTR Value Vhigh=5
SYMATTR InstName A15
SYMBOL voltage -800 -1104 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value SINE(0 12 50)
SYMBOL voltage -800 -912 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value 5
SYMBOL AutoGenerated\\amp_tlv27x_highVdd -304 -1024 R0
SYMATTR InstName U1
SYMBOL res -576 -1152 R0
SYMATTR InstName R4
SYMATTR Value 30k
SYMBOL res -576 -1040 R0
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL voltage -1088 -1008 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V7
SYMATTR Value 12
SYMBOL AutoGenerated\\amp_tlv27x_highVdd -304 -864 R0
SYMATTR InstName U2
SYMBOL Digital\\or -112 -1008 R0
WINDOW 3 -36 125 Invisible 2
SYMATTR Value Vhigh=12
SYMATTR InstName A16
SYMBOL Digital\\or 928 -576 R0
WINDOW 3 -36 125 Invisible 2
SYMATTR Value Vhigh=5
SYMATTR InstName A12
SYMBOL res 288 -1056 R0
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL res 288 -944 R0
SYMATTR InstName R7
SYMATTR Value 6k8
SYMBOL res 448 -1056 R0
SYMATTR InstName R8
SYMATTR Value 10k
SYMBOL res 448 -944 R0
SYMATTR InstName R9
SYMATTR Value 6k8
SYMBOL res 576 -1056 R0
SYMATTR InstName R10
SYMATTR Value 10k
SYMBOL res 576 -944 R0
SYMATTR InstName R11
SYMATTR Value 6k8
SYMBOL Digital\\or 928 -480 R0
WINDOW 3 -36 125 Invisible 2
SYMATTR Value Vhigh=5
SYMATTR InstName A9
SYMBOL Digital\\or 928 -384 R0
WINDOW 3 -36 125 Invisible 2
SYMATTR Value Vhigh=5
SYMATTR InstName A10
SYMBOL Digital\\or 928 -288 R0
WINDOW 3 -36 125 Invisible 2
SYMATTR Value Vhigh=5
SYMATTR InstName A11
SYMBOL voltage -976 -1008 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 5
TEXT -192 312 Left 2 !.tran 40m startup uic
TEXT -280 -8 Left 2 !.param fs=20k
TEXT 1528 -392 Left 2 ;Links to Reserch Papers\nhttp://wrap.warwick.ac.uk/135348/1/WRAP-reliable-control-direct-PWM-AC-AC%20buck-converter-short-circuit-protection-Wang-2019.pdf\nhttps://www.researchgate.net/publication/224125119_Direct_AC-AC_Converters_Using_Commercial_Power_Modules_Applied_to_Voltage_Restorers
TEXT -576 184 Left 2 ;This generates The long and short PWM pulses
TEXT 696 -8 Left 2 ;Gate PWMs
TEXT -648 -616 Left 2 ;Dead Time Circuit
TEXT -272 24 Left 2 !.param duty=.2
TEXT 2440 -208 Left 2 ;Power Section
TEXT 648 -600 Left 2 ;PWM Diverter
TEXT -568 -1248 Left 2 ;POS/NEG detection
